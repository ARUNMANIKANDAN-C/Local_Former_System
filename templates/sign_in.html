{% extends 'base.html' %}

{% block title %}siginup{% endblock %}

{% block scripts %}
<script>
    function generateOTP() {
        let phoneField = document.getElementById("phone");
        let otpField = document.getElementById("otp");
        let submitBtn = document.getElementById("submit-btn");

        let phonePattern = /^\+?\d{10,15}$/; // Regex for validating phone number

        if (!phonePattern.test(phoneField.value.trim())) {
            alert("Please enter a valid phone number (10-15 digits).");
            phoneField.focus();
            return;
        }

        let otp = Math.floor(1000 + Math.random() * 9000); // Generate 4-digit OTP
        alert("Your OTP is: " + otp);

        otpField.disabled = false;
        submitBtn.disabled = false;
    }
</script>
{% endblock %}
{% block content %}
<div class="login">
    <form class="form" action="/login" method="POST">
            <label for="phone">Phone Number:</label>
            <input type="tel" name="phone" id="phone" placeholder="+1234567890" 
                required pattern="\+?\d{10,15}" inputmode="numeric" autocomplete="tel"
                title="Enter a valid phone number with 10 to 15 digits.">
    
            <label for="passkey">Enter your Password:</label>
            <input type="password" name="passkey" id="passkey" placeholder="Your Password"
                required autocomplete="current-password">
    
            <button type="button" onclick="generateOTP()">Get OTP</button>

            <label for="otp">Enter your OTP:</label>
            <input type="text" name="OTP" id="otp" placeholder="123456" required 
                pattern="\d{4,6}" inputmode="numeric" autocomplete="off"
                title="Enter a 4 to 6-digit OTP." disabled>
    
            <input type="submit" id="submit-btn" value="Submit" disabled>
        </fieldset>
    </form>
    
</div>
{% endblock %}